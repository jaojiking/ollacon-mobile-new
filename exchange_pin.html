<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OllaCon - 1:1 ê¸ˆì•¡ êµí™˜</title>
    <!-- Font Awesome ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> 
    
    <style>
        /* ==================================
           í”„ë¡œì íŠ¸ ê³µí†µ ìŠ¤íƒ€ì¼ (OllaCon Standard)
           ================================== */
        :root {
            --primary-color: #f9634d; /* OllaCon ì½”ë„ ì˜¤ë Œì§€ */
            --primary-dark: #e55440;
            --primary-light: #ffe5e0; /* ìƒˆë¡œìš´ ê²½ê³ ì°½/ì„ íƒ ë°°ê²½ìƒ‰ */
        }
        
        body { font-family: 'Inter', sans-serif; background-color: #f4f4f4; margin: 0; padding: 0; }
        .app-container { max-width: 450px; margin: 0 auto; background: white; min-height: 100vh; display: flex; flex-direction: column; }
        
        /* A. ìƒë‹¨ í—¤ë” ìŠ¤íƒ€ì¼ */
        .header { padding: 15px; background: white; border-bottom: 1px solid #eee; position: sticky; top: 0; z-index: 10; display: flex; align-items: center; }
        .back-button { font-size: 20px; color: #333; cursor: pointer; margin-right: 15px; }
        .page-title { font-size: 18px; font-weight: 700; color: #333; margin: 0; flex-grow: 1; }

        /* B. ë©”ì¸ ì½˜í…ì¸  ìŠ¤íƒ€ì¼ */
        .main-content { padding: 0 20px 80px 20px; flex-grow: 1; } 
        
        /* D. í•˜ë‹¨ íƒ­ ë°” (wallet.htmlê³¼ ë™ì¼) */
        .tab-bar { 
            display: flex; 
            justify-content: space-around; 
            align-items: center;
            background-color: white; 
            border-top: 1px solid #eee; 
            padding: 5px 0; 
            margin-top: auto; 
            box-shadow: 0 -2px 5px rgba(0,0,0,0.05);
            position: fixed; 
            bottom: 0;
            width: 100%;
            max-width: 450px;
            z-index: 20;
        }
        .tab-item { 
            text-align: center; 
            padding: 5px; 
            cursor: pointer; 
            color: #999; 
            transition: color 0.2s;
            flex: 1;
        }
        .tab-item.active { color: var(--primary-color); } /* í™œì„± íƒ­ ìƒ‰ìƒ í†µì¼ */
        .tab-item i { font-size: 22px; display: block; margin-bottom: 2px; }
        .tab-item p { font-size: 11px; margin: 0; font-weight: 600; }


        /* ==================================
           ì œí’ˆ êµí™˜ í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ 
           ================================== */
        
        /* ì•Œë¦¼ ë°” (1:1 êµí™˜ ì •ì±…) */
        .alert-bar {
            background-color: var(--primary-light); /* ì—°í•œ ì˜¤ë Œì§€ ë°°ê²½ */
            color: var(--primary-dark); /* ì§„í•œ ì˜¤ë Œì§€ í…ìŠ¤íŠ¸ */
            border: 1px solid #ffc2b3; /* ë°ì€ ì˜¤ë Œì§€ í…Œë‘ë¦¬ */
            padding: 10px 15px;
            margin-top: 0; /* í—¤ë” ë°”ë¡œ ì•„ë˜ì— ë¶™ë„ë¡ ì¡°ì • */
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
        }
        
        /* ìºëŸ¬ì…€ */
        .carousel-container {
            overflow: hidden;
            margin: 20px 0;
            position: relative;
        }
        .carousel {
            display: flex;
            overflow-x: scroll;
            scroll-snap-type: x mandatory;
            -webkit-overflow-scrolling: touch;
            gap: 10px;
            padding-bottom: 10px;
        }
        .carousel-item {
            flex: 0 0 calc(100% - 20px); /* ì–‘ìª½ íŒ¨ë”©ì„ ê³ ë ¤í•˜ì—¬ ê½‰ ì±„ìš°ë„ë¡ ì„¤ì • */
            height: 120px;
            border-radius: 12px;
            color: white;
            padding: 20px;
            box-sizing: border-box;
            scroll-snap-align: start;
        }
        .carousel-item:first-child { margin-left: 20px; }
        .carousel-item:last-child { margin-right: 20px; }
        .carousel-text { font-size: 18px; font-weight: 700; margin: 0 0 5px 0; }
        .carousel-subtext { font-size: 14px; font-weight: 400; margin: 0; opacity: 0.8; }

        /* ìºëŸ¬ì…€ ì¸ë””ì¼€ì´í„° */
        .carousel-indicators {
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 5px;
        }
        .dot {
            height: 6px;
            width: 6px;
            background-color: #bbb;
            border-radius: 50%;
            display: inline-block;
            transition: background-color 0.3s;
        }
        .dot.active {
            background-color: var(--primary-color);
            width: 15px;
            border-radius: 5px;
        }
        
        /* ì¹´í…Œê³ ë¦¬ ìŠ¤í¬ë¡¤ */
        .category-scroll {
            display: flex;
            overflow-x: scroll;
            gap: 10px;
            padding: 5px 0 20px 0;
            margin: 0 0 0 -20px; /* main-content padding ìƒì‡„ */
            padding-left: 20px;
            -webkit-overflow-scrolling: touch;
        }
        .category-item {
            flex-shrink: 0;
            padding: 8px 15px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 14px;
            color: #555;
            cursor: pointer;
            transition: all 0.2s;
        }
        .category-item.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* ìƒí’ˆ ê·¸ë¦¬ë“œ */
        .product-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            padding-top: 5px;
        }
        .product-card {
            background: #fff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.2s;
        }
        .product-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .product-image-placeholder {
            height: 120px;
            background-color: #f7f7f7;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 40px;
            color: #ccc;
            position: relative;
        }
        .image-tag {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 11px;
            color: white;
            padding: 4px 8px;
            border-radius: 5px;
            font-weight: 700;
        }
        .product-info {
            padding: 10px;
            text-align: center;
        }
        .product-name {
            font-size: 15px;
            font-weight: 600;
            margin: 0 0 5px 0;
            color: #333;
            line-height: 1.3;
        }
        .product-price {
            font-size: 16px;
            font-weight: 700;
            color: var(--primary-color);
            margin: 0;
        }

        /* ==================================
           ê²°ì œ íŒì—… ìŠ¤íƒ€ì¼ (Color Unified)
           ================================== */
        .payment-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex; 
            justify-content: center;
            align-items: flex-end; 
            z-index: 1000;
            opacity: 0; 
            visibility: hidden; 
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .payment-popup.active {
            opacity: 1;
            visibility: visible;
        }
        .payment-content {
            background: white;
            width: 100%;
            max-width: 450px; 
            padding: 20px 20px 40px 20px;
            border-top-left-radius: 15px;
            border-top-right-radius: 15px;
            box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.2);
            transform: translateY(100%); 
            transition: transform 0.3s ease-out;
        }
        .payment-popup.active .payment-content {
            transform: translateY(0);
        }
        .payment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .payment-header h3 { margin: 0; font-size: 18px; }
        .close-btn { background: none; border: none; font-size: 24px; color: #aaa; cursor: pointer; }
        .payment-info p { margin: 5px 0; font-size: 15px; color: #555; }
        .payment-amount {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color); /* ìƒ‰ìƒ í†µì¼ */
            margin: 10px 0 25px 0;
        }
        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        .method-btn {
            background: #f7f7f7;
            border: 1px solid #ddd;
            padding: 15px;
            border-radius: 8px;
            font-size: 16px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .method-btn.selected {
            border: 2px solid var(--primary-color); /* ìƒ‰ìƒ í†µì¼ */
            background: var(--primary-light); /* ì—°í•œ ì˜¤ë Œì§€ ë°°ê²½ */
        }
        .confirm-payment-btn {
            width: 100%;
            padding: 15px;
            background-color: var(--primary-color); /* ë©”ì¸ ë²„íŠ¼ ìƒ‰ìƒ í†µì¼ */
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 700;
            margin-top: 25px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .confirm-payment-btn:hover {
            background-color: var(--primary-dark);
        }

    </style>
</head>
<body>
    <div class="app-container">
        
        <!-- A. ìƒë‹¨ í—¤ë” -->
        <header class="header">
            <i class="fas fa-arrow-left back-button" onclick="window.history.back();"></i>
            <h1 class="page-title">1:1 ê¸ˆì•¡ êµí™˜</h1>
        </header>

        <!-- ì•Œë¦¼ ë°”ë¥¼ í—¤ë” ë°–ì— ìœ„ì¹˜ì‹œì¼œ ìŠ¤í¬ë¡¤ ì‹œì—ë„ ë³´ì´ê²Œ í•˜ê±°ë‚˜, í—¤ë” ë°”ë¡œ ì•„ë˜ì— ê³ ì • (ì´ ë²„ì „ì—ì„œëŠ” í—¤ë” ì•„ë˜ì— ë¶™ë„ë¡ ìˆ˜ì •) -->
        <div class="alert-bar" style="max-width: 450px; margin: 0 auto; z-index: 9;">
            <i class="fas fa-check-circle"></i>
            <span style="font-weight: 700; color: var(--primary-dark);">[1:1 êµí™˜ ì •ì±…]</span> **ê¸ˆì•¡ê¶Œ ê¸ˆì•¡ê³¼ ìƒí’ˆ ê°€ê²©ì´ ì •í™•íˆ ì¼ì¹˜**í•˜ëŠ” ì œí’ˆìœ¼ë¡œë§Œ êµí™˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.
        </div>
        
        <main class="main-content market-content">

            <!-- ìºëŸ¬ì…€ ì„¹ì…˜ -->
            <div class="carousel-container">
                <div class="carousel" id="marketCarousel">
                    <div class="carousel-item" style="background: linear-gradient(135deg, var(--primary-color), #ff8a65);">
                        <p class="carousel-text">âœ… 1ë§Œì›ê¶Œ: 10,000ì› ì œí’ˆìœ¼ë¡œ **ì¶”ê°€ ê²°ì œ ì—†ì´** êµí™˜</p>
                        <p class="carousel-subtext">ì”ì•¡ ì†ì‹¤ ì—†ì´ ê¸ˆì•¡ ê·¸ëŒ€ë¡œ êµí™˜í•˜ì„¸ìš”.</p>
                    </div>
                    <div class="carousel-item" style="background: linear-gradient(135deg, #1abc9c, #16a085);">
                        <p class="carousel-text">âœ… 3ë§Œì›ê¶Œ: 30,000ì› ì œí’ˆìœ¼ë¡œ **0ì›** êµí™˜</p>
                        <p class="carousel-subtext">ê°€ì¥ ë¹ ë¥´ê³  ê°„í¸í•˜ê²Œ êµí™˜í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤!</p>
                    </div>
                    <div class="carousel-item" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                        <p class="carousel-text">ğŸš« 1ì›ì´ë¼ë„ ì°¨ì´ê°€ ë‚˜ë©´ êµí™˜ì´ ë¶ˆê°€í•©ë‹ˆë‹¤.</p>
                        <p class="carousel-subtext">ê¸ˆì•¡ì„ ì •í™•íˆ í™•ì¸ í›„ ìƒí’ˆì„ ì„ íƒí•´ ì£¼ì„¸ìš”.</p>
                    </div>
                </div>
                <div class="carousel-indicators" id="carouselIndicators">
                    <span class="dot active"></span>
                    <span class="dot"></span>
                    <span class="dot"></span>
                </div>
            </div>

            <!-- ì¹´í…Œê³ ë¦¬ ìŠ¤í¬ë¡¤ -->
            <div class="category-scroll">
                <div class="category-item active">ì „ì²´</div>
                <div class="category-item">ì‹í’ˆ/ì™¸ì‹</div>
                <div class="category-item">ì»¤í”¼/ìŒë£Œ</div>
                <div class="category-item">í¸ì˜ì </div>
                <div class="category-item">ì‡¼í•‘/ì¡í™”</div>
                <div class="category-item">ë””ì§€í„¸</div>
            </div>
            
            <!-- ìƒí’ˆ ê·¸ë¦¬ë“œ -->
            <div class="product-grid">
                <div class="product-card" onclick="openPaymentPopup('ë°°ë‹¬ì˜ë¯¼ì¡± 1ë§Œì›ê¶Œ', 10000, 10000);">
                    <div class="product-image-placeholder">
                        <span class="image-tag" style="background-color: var(--primary-color);">1:1 êµí™˜ (0ì›)</span>
                        <i class="fas fa-utensils" style="color: #6a5acd;"></i>
                    </div>
                    <div class="product-info">
                        <p class="product-name">ë°°ë‹¬ì˜ë¯¼ì¡± 1ë§Œì›ê¶Œ</p>
                        <p class="product-price">10,000ì›</p>
                    </div>
                </div>

                <div class="product-card" onclick="openPaymentPopup('GS25 ê¸ˆì•¡ê¶Œ 10,000ì›', 10000, 10000);">
                    <div class="product-image-placeholder">
                        <span class="image-tag" style="background-color: var(--primary-color);">1:1 êµí™˜ (0ì›)</span>
                        <i class="fas fa-store" style="color: #3498db;"></i>
                    </div>
                    <div class="product-info">
                        <p class="product-name">GS25 ê¸ˆì•¡ê¶Œ 10,000ì›</p>
                        <p class="product-price">10,000ì›</p>
                    </div>
                </div>

                <div class="product-card" onclick="openPaymentPopup('ìŠ¤íƒ€ë²…ìŠ¤ ê¸ˆì•¡ê¶Œ 1ë§Œì›', 10000, 10000);">
                    <div class="product-image-placeholder">
                        <span class="image-tag" style="background-color: var(--primary-color);">1:1 êµí™˜ (0ì›)</span>
                        <i class="fas fa-coffee" style="color: #34495e;"></i>
                    </div>
                    <div class="product-info">
                        <p class="product-name">ìŠ¤íƒ€ë²…ìŠ¤ ê¸ˆì•¡ê¶Œ 1ë§Œì›</p>
                        <p class="product-price">10,000ì›</p>
                    </div>
                </div>

                <div class="product-card" onclick="openPaymentPopup('ì‹ ì„¸ê³„ ìƒí’ˆê¶Œ 3ë§Œì›', 30000, 30000);">
                    <div class="product-image-placeholder">
                        <span class="image-tag" style="background-color: var(--primary-color);">1:1 êµí™˜ (0ì›)</span>
                        <i class="fas fa-shopping-bag" style="color: #9b59b6;"></i>
                    </div>
                    <div class="product-info">
                        <p class="product-name">ì‹ ì„¸ê³„ ìƒí’ˆê¶Œ 3ë§Œì›</p>
                        <p class="product-price">30,000ì›</p>
                    </div>
                </div>
                
                <div class="product-card" onclick="openPaymentPopup('ì»¬ì³ëœë“œ ìƒí’ˆê¶Œ 3ë§Œì›', 30000, 30000);">
                    <div class="product-image-placeholder">
                        <span class="image-tag" style="background-color: var(--primary-color);">1:1 êµí™˜ (0ì›)</span>
                        <i class="fas fa-gamepad" style="color: #e67e22;"></i>
                    </div>
                    <div class="product-info">
                        <p class="product-name">ì»¬ì³ëœë“œ ìƒí’ˆê¶Œ 3ë§Œì›</p>
                        <p class="product-price">30,000ì›</p>
                    </div>
                </div>
                
                <div class="product-card" onclick="openPaymentPopup('ë„¤ì´ë²„ í˜ì´ í¬ì¸íŠ¸ 3ë§Œì›', 30000, 30000);">
                    <div class="product-image-placeholder">
                        <span class="image-tag" style="background-color: var(--primary-color);">1:1 êµí™˜ (0ì›)</span>
                        <i class="fas fa-globe" style="color: #2c3e50;"></i>
                    </div>
                    <div class="product-info">
                        <p class="product-name">ë„¤ì´ë²„ í˜ì´ í¬ì¸íŠ¸ 3ë§Œì›</p>
                        <p class="product-price">30,000ì›</p>
                    </div>
                </div>

            </div>

        </main>

        <!-- D. í•˜ë‹¨ íƒ­ ë°” -->
        <footer class="tab-bar">
            <div class="tab-item" onclick="window.location.href='index.html';"><i class="fas fa-home"></i><p>í™ˆ</p></div>
            <!-- í˜„ì¬ í˜ì´ì§€ë¥¼ activeë¡œ ì„¤ì • -->
            <div class="tab-item active" onclick="window.location.href='market.html';"><i class="fas fa-store"></i><p>ì œí’ˆ êµí™˜</p></div>
            <div class="tab-item" onclick="window.location.href='wallet.html';"><i class="fas fa-wallet"></i><p>ë‚´ ì§€ê°‘</p></div>
            <div class="tab-item" onclick="window.location.href='mypage.html';"><i class="fas fa-user-circle"></i><p>ë§ˆì´í˜ì´ì§€</p></div>
        </footer>

    </div>

    <!-- ê²°ì œ íŒì—… ëª¨ë‹¬ -->
    <div id="paymentPopup" class="payment-popup">
        <div class="payment-content">
            <div class="payment-header">
                <h3 id="popupTitle">1:1 ê¸ˆì•¡ êµí™˜ ì§„í–‰</h3>
                <button class="close-btn" onclick="closePaymentPopup()">&times;</button>
            </div>
            
            <div class="payment-info">
                <p>ìƒí’ˆ: <strong id="productName"></strong></p>
                <p>ìƒí’ˆ ê°€ê²©: <span id="productPrice"></span>ì›</p>
                <p>ë³´ìœ  ê¸ˆì•¡ê¶Œ ì ìš©: <span id="ollaConUsed"></span>ì›</p>
                <div style="border-top: 1px dashed #eee; margin: 10px 0;"></div>
                <p style="color: var(--primary-color); font-weight: 700;">ìµœì¢… êµí™˜ ë¹„ìš©:</p>
                <div class="payment-amount" id="requiredPayment">0ì›</div>
            </div>

            <p style="font-weight: 600; margin-bottom: 10px;">êµí™˜ ë°©ì‹ í™•ì¸</p>
            
            <div class="payment-methods">
                <!-- 1:1 êµí™˜ì´ë¯€ë¡œ ì˜µì…˜ì€ í•˜ë‚˜ë§Œ ìœ ì§€ -->
                <button class="method-btn" data-method="exchange" onclick="selectPaymentMethod(this)">
                    <i class="fas fa-exchange-alt" style="color: var(--primary-color);"></i> ê¸ˆì•¡ê¶Œ ì°¨ê° í›„ ìƒí’ˆìœ¼ë¡œ êµí™˜
                </button>
            </div>
            
            <button class="confirm-payment-btn" onclick="processPayment()">
                1:1 êµí™˜ ì™„ë£Œí•˜ê¸° (0ì›)
            </button>
        </div>
    </div>
    
    <script>
        // ìºëŸ¬ì…€ ê¸°ëŠ¥ (ê¸°ì¡´ ì½”ë“œ ìœ ì§€)
        const carousel = document.getElementById('marketCarousel');
        const indicators = document.getElementById('carouselIndicators').children;
        const totalSlides = carousel.children.length;

        // ìºëŸ¬ì…€ ìë™ ìŠ¤í¬ë¡¤ ê¸°ëŠ¥
        let currentSlide = 0;
        function showSlide(index) {
            currentSlide = index;
            const itemWidth = carousel.children[0].offsetWidth + 10;
            carousel.scrollTo({
                left: currentSlide * itemWidth,
                behavior: 'smooth'
            });
            updateIndicators();
        }

        function updateIndicators() {
            for (let i = 0; i < totalSlides; i++) {
                indicators[i].classList.remove('active');
            }
            indicators[currentSlide].classList.add('active');
        }

        function autoScroll() {
            currentSlide = (currentSlide + 1) % totalSlides;
            showSlide(currentSlide);
        }

        // 3ì´ˆë§ˆë‹¤ ìë™ ìŠ¤í¬ë¡¤
        let scrollInterval = setInterval(autoScroll, 3000);

        // ìŠ¤í¬ë¡¤ ì‹œ ìë™ ìŠ¤í¬ë¡¤ ì´ˆê¸°í™” ë° ì¸ë””ì¼€ì´í„° ì—…ë°ì´íŠ¸
        carousel.addEventListener('scroll', () => {
            clearInterval(scrollInterval);
            scrollInterval = setInterval(autoScroll, 3000);
            
            const scrollLeft = carousel.scrollLeft;
            const itemWidth = carousel.children[0].offsetWidth + 10;
            let activeIndex = Math.round(scrollLeft / itemWidth);
            activeIndex = Math.min(Math.max(0, activeIndex), totalSlides - 1);
            
            if (currentSlide !== activeIndex) {
                 currentSlide = activeIndex;
                 updateIndicators();
            }
        });
        
        // íŒì—… ì œì–´ ë³€ìˆ˜ ë° í•¨ìˆ˜
        const popup = document.getElementById('paymentPopup');
        let currentProductName = "";
        let currentRequiredAmount = 0; 
        let selectedMethod = null;

        /**
         * íŒì—…ì„ ì—´ê³  ìƒí’ˆ ì •ë³´ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
         * @param {string} name ìƒí’ˆëª…
         * @param {number} price ìƒí’ˆ ê°€ê²© (ì›)
         * @param {number} ollaConValue ì ìš©í•  ì˜¬ë¼ì½˜ ê¸ˆì•¡ê¶Œ ê°€ì¹˜ (ì›)
         */
        function openPaymentPopup(name, price, ollaConValue) {
            // ê²½ê³  ëª¨ë‹¬ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³€ê²½
            const requiredAmount = price - ollaConValue;
            
            if (requiredAmount !== 0) {
                 showCustomAlert(`[1:1 êµí™˜ ì •ì±… ìœ„ë°˜]\nìƒí’ˆ ê°€ê²© ${price.toLocaleString()}ì›ê³¼ ê¸ˆì•¡ê¶Œ ${ollaConValue.toLocaleString()}ì›ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n1:1 ê¸ˆì•¡ êµí™˜ì€ ì°¨ì•¡ì´ 0ì›ì¸ ì œí’ˆë§Œ êµí™˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.`);
                 return;
            }
            
            currentProductName = name;
            currentRequiredAmount = 0; 

            document.getElementById('productName').textContent = name;
            document.getElementById('productPrice').textContent = price.toLocaleString();
            document.getElementById('ollaConUsed').textContent = ollaConValue.toLocaleString();
            document.getElementById('requiredPayment').textContent = '0ì›';
            
            const confirmBtn = document.querySelector('.confirm-payment-btn');
            confirmBtn.textContent = '1:1 êµí™˜ ì™„ë£Œí•˜ê¸° (0ì›)';
            
            popup.classList.add('active');
            selectPaymentMethod(document.querySelector('.method-btn'));
        }

        function closePaymentPopup() {
            popup.classList.remove('active');
            selectedMethod = null;
            document.querySelectorAll('.method-btn').forEach(btn => btn.classList.remove('selected'));
        }

        function selectPaymentMethod(button) {
            document.querySelectorAll('.method-btn').forEach(btn => btn.classList.remove('selected'));
            button.classList.add('selected');
            selectedMethod = button.getAttribute('data-method');
        }

        function processPayment() {
            if (!selectedMethod) {
                showCustomAlert('êµí™˜ ë°©ì‹ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.');
                return;
            }
            
            showCustomAlert(`[êµí™˜ ì„±ê³µ] ìƒí’ˆ: ${currentProductName}\nê¸ˆì•¡ê¶Œ ${document.getElementById('ollaConUsed').textContent}ì›ì„ ì‚¬ìš©í•˜ì—¬\n1:1 êµí™˜ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');

            closePaymentPopup();
        }

        // ë°°ê²½ í´ë¦­ ì‹œ íŒì—… ë‹«ê¸°
        popup.addEventListener('click', (e) => {
            if (e.target === popup) {
                closePaymentPopup();
            }
        });

        // ì»¤ìŠ¤í…€ ì•Œë¦¼ í•¨ìˆ˜ (alert() ëŒ€ì²´)
        function showCustomAlert(message, type = 'error') {
            let alertBox = document.getElementById('customAlert');
            if (!alertBox) {
                alertBox = document.createElement('div');
                alertBox.id = 'customAlert';
                alertBox.style.cssText = `
                    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                    background: rgba(0,0,0,0.4); display: none; justify-content: center;
                    align-items: center; z-index: 10000;
                `;
                alertBox.innerHTML = `
                    <div style="background: white; padding: 25px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); max-width: 300px; text-align: center;">
                        <i id="alertIcon" class="fas" style="font-size: 30px; margin-bottom: 10px; color: #f9634d;"></i>
                        <p id="alertMessage" style="font-size: 15px; white-space: pre-wrap; margin: 10px 0 20px 0; color: #333;"></p>
                        <button onclick="document.getElementById('customAlert').style.display='none';" 
                                style="width: 100%; padding: 10px; background-color: #f9634d; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600;">í™•ì¸</button>
                    </div>
                `;
                document.body.appendChild(alertBox);
            }

            const icon = alertBox.querySelector('#alertIcon');
            if (type === 'success') {
                icon.className = 'fas fa-check-circle';
                icon.style.color = '#38a169'; // Success green
            } else {
                icon.className = 'fas fa-exclamation-circle';
                icon.style.color = '#f9634d'; // Error orange
            }

            alertBox.querySelector('#alertMessage').textContent = message;
            alertBox.style.display = 'flex';
        }
    </script>
</body>
</html>